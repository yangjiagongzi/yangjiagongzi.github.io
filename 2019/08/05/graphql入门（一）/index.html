<!DOCTYPE html>
<html lang="zh-CN">
  <!-- Head tag -->
  <head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!--Description-->
  
  <meta name="description" content="ç›´æ¥è¿›å…¥ä¸»é¢˜ã€‚graphql ä¸­é—´å±‚æœåŠ¡çš„æ­å»ºæ­å»ºä¸€ä¸ªç®€å•çš„ graphql ä¸­é—´å±‚æœåŠ¡é€‰ç”¨æ¡†æ¶ï¼škoaï¼Œé¦–å…ˆæ‰“å¼€ apollo-server-koa çš„æ–‡æ¡£ï¼ŒæŒ‰ç…§æ–‡æ¡£è¯´æ˜å…ˆæŠŠæœåŠ¡èµ·èµ·æ¥ã€‚

åˆ›å»ºä¸€ä¸ªç©ºçš„é¡¹ç›®ï¼Œç„¶åæ‰§è¡Œnpm install apollo-server-koa graphql

åˆ›å»º">
  

  <!--Author-->
  
  <meta name="author" content="Near">
  

  <!--Open Graph Title-->
  
  <meta property="og:title" content="graphqlå…¥é—¨ï¼ˆä¸€ï¼‰">
  

  <!--Open Graph Description-->
  

  <!--Open Graph Site Name-->
  <meta property="og:site_name" content="æ¨å®¶å…¬å­çš„åšå®¢">

  <!--Type page-->
  
  <meta property="og:type" content="article">
  

  <!--Page Cover-->
   
  <meta name="twitter:card" content="summary">
    

  <!-- Title -->
  
  <title>graphqlå…¥é—¨ï¼ˆä¸€ï¼‰ - æ¨å®¶å…¬å­çš„åšå®¢</title>

  <!-- Bootstrap Core CSS -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

  <!-- Custom Fonts -->
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->

  <!-- Gallery -->
  <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/style.css">
</head>


  <body>
    <div class="bg-gradient"></div>
    <div class="bg-pattern"></div>

    <!-- Menu -->
    <!--Menu Links and Overlay-->
<div class="menu-bg">
  <div class="menu-container">
    <ul>
      
      <li class="menu-item">
        <a href="/"> Home </a>
      </li>
      
      <li class="menu-item">
        <a href="/archives"> Archives </a>
      </li>
      
      <li class="menu-item">
        <a href="/tags"> Tags </a>
      </li>
      
      <li class="menu-item">
        <a href="/categories"> Categories </a>
      </li>
      
    </ul>
  </div>
</div>

<!--Hamburger Icon-->
<nav>
  <a href="#menu"></a>
</nav>


    <div class="container">
      <!-- Main Content -->
      <div class="root">
  <div class="content">
    <header>
  <div class="logo">
    <a href="/">
      <div id="title-desktop" class="hidden">æ¨å®¶å…¬å­</div>
      <div id="title-mobile" class="hidden">æ¨å®¶å…¬å­</div>
      <canvas id="spring-text"></canvas
    ></a>
    
  </div>
</header>


    <section class="main">
      
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2019/08/05/graphqlå…¥é—¨ï¼ˆä¸€ï¼‰/">
                graphqlå…¥é—¨ï¼ˆä¸€ï¼‰
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-08-05</span>
            
            
            
                <span class="category">
                    <a href="/categories/javascript/">javascript</a>
                </span>
            
        </div>
    </div>

    <div class="content">

        

        <h3 id="ç›´æ¥è¿›å…¥ä¸»é¢˜ã€‚"><a href="#ç›´æ¥è¿›å…¥ä¸»é¢˜ã€‚" class="headerlink" title="ç›´æ¥è¿›å…¥ä¸»é¢˜ã€‚"></a>ç›´æ¥è¿›å…¥ä¸»é¢˜ã€‚</h3><h3 id="graphql-ä¸­é—´å±‚æœåŠ¡çš„æ­å»º"><a href="#graphql-ä¸­é—´å±‚æœåŠ¡çš„æ­å»º" class="headerlink" title="graphql ä¸­é—´å±‚æœåŠ¡çš„æ­å»º"></a>graphql ä¸­é—´å±‚æœåŠ¡çš„æ­å»º</h3><h4 id="æ­å»ºä¸€ä¸ªç®€å•çš„-graphql-ä¸­é—´å±‚æœåŠ¡"><a href="#æ­å»ºä¸€ä¸ªç®€å•çš„-graphql-ä¸­é—´å±‚æœåŠ¡" class="headerlink" title="æ­å»ºä¸€ä¸ªç®€å•çš„ graphql ä¸­é—´å±‚æœåŠ¡"></a>æ­å»ºä¸€ä¸ªç®€å•çš„ graphql ä¸­é—´å±‚æœåŠ¡</h4><p>é€‰ç”¨æ¡†æ¶ï¼škoaï¼Œé¦–å…ˆæ‰“å¼€ apollo-server-koa çš„<a href="https://github.com/apollographql/apollo-server/tree/master/packages/apollo-server-koa" target="_blank" rel="noopener">æ–‡æ¡£</a>ï¼ŒæŒ‰ç…§æ–‡æ¡£è¯´æ˜å…ˆæŠŠæœåŠ¡èµ·èµ·æ¥ã€‚</p>
<ul>
<li><p>åˆ›å»ºä¸€ä¸ªç©ºçš„é¡¹ç›®ï¼Œç„¶åæ‰§è¡Œ<code>npm install apollo-server-koa graphql</code></p>
</li>
<li><p>åˆ›å»º main.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">const Koa = require(&apos;koa&apos;);</span><br><span class="line">const &#123; ApolloServer, gql &#125; = require(&apos;apollo-server-koa&apos;);</span><br><span class="line"></span><br><span class="line">// Construct a schema, using GraphQL schema language</span><br><span class="line">const typeDefs = gql`</span><br><span class="line">  type Query &#123;</span><br><span class="line">    hello: String</span><br><span class="line">  &#125;</span><br><span class="line">`;</span><br><span class="line"></span><br><span class="line">// Provide resolver functions for your schema fields</span><br><span class="line">const resolvers = &#123;</span><br><span class="line">  Query: &#123;</span><br><span class="line">    hello: () =&gt; &apos;Hello world!&apos;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const server = new ApolloServer(&#123; typeDefs, resolvers &#125;);</span><br><span class="line"></span><br><span class="line">const app = new Koa();</span><br><span class="line">server.applyMiddleware(&#123; app &#125;);</span><br><span class="line"></span><br><span class="line">app.listen(&#123; port: 4000 &#125;, () =&gt;</span><br><span class="line">  console.log(`ğŸš€ Server ready at http://localhost:4000$&#123;server.graphqlPath&#125;`),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰§è¡Œ<code>node main.js</code> å°†é¡¹ç›®å¯åŠ¨</p>
</li>
<li><p>æµè§ˆå™¨ä¸­è®¿é—®<a href="http://localhost:4000/graphql" target="_blank" rel="noopener">http://localhost:4000/graphql</a></p>
</li>
<li><p>åœ¨ Playground ä¸­å·¦åŠè¾¹è¾“å…¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  hello</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç‚¹å‡»ä¸­é—´çš„è¿è¡ŒæŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°å³åŠè¾¹ä¼šå‡ºç°è¯·æ±‚çš„å†…å®¹</p>
</li>
</ul>
<p>ç°åœ¨å‘¢ï¼Œä¸­é—´å±‚å¾ˆç®€å•çš„ä¸€ä¸ªæœåŠ¡å°±å¯åŠ¨èµ·æ¥äº†ã€‚apollo-server æä¾›äº†å¯è§†åŒ–ç•Œé¢ç”¨æ¥æ»¡è¶³å¼€å‘è°ƒè¯•ã€‚å…¶ä»–ä¸€äº›å…·ä½“çš„é…ç½®è¯·å‚è€ƒ<a href="https://github.com/apollographql/apollo-server/blob/aa9691ee3ce6e70694dcd803be782e16f376c25a/packages/apollo-server-core/src/types.ts#L94" target="_blank" rel="noopener">Config</a>ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬è¿™èŠ‚è¯¾çš„é‡ç‚¹ï¼Œå°±ä¸ç»†è¯´äº†ã€‚</p>
<h4 id="å®Œå–„ä¸€ä¸‹é¡¹ç›®"><a href="#å®Œå–„ä¸€ä¸‹é¡¹ç›®" class="headerlink" title="å®Œå–„ä¸€ä¸‹é¡¹ç›®"></a>å®Œå–„ä¸€ä¸‹é¡¹ç›®</h4><p>åªæœ‰ä¸€ä¸ª hello å¾ˆæ˜æ˜¾ä¸èƒ½æ»¡è¶³æˆ‘ä»¬å·¥ä½œçš„å†…å®¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å‡è®¾ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬è¦åšä¸€ä¸ªå¹´çº§å­¦ç”Ÿç®¡ç†çš„ç³»ç»Ÿï¼Œæ¯ä¸ªå¹´çºªæœ‰å¥½å‡ ä¸ªç­ï¼Œæ¯ä¸ªç­æœ‰å¥½å¤šä¸ªå­¦ç”Ÿï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ª json æ–‡ä»¶æ¥æ¨¡æ‹Ÿæ•°æ®åº“ã€‚json æˆ‘ä¹Ÿä¸ºä½ ä»¬å‡†å¤‡å¥½äº†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;grade&quot;:[&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;ä¸€å¹´çº§&quot;&#125;,&#123;&quot;id&quot;:2,&quot;name&quot;:&quot;äºŒå¹´çº§&quot;&#125;],&quot;class&quot;:[&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;1ç­&quot;,&quot;gradeId&quot;:1&#125;,&#123;&quot;id&quot;:2,&quot;name&quot;:&quot;2ç­&quot;,&quot;gradeId&quot;:1&#125;,&#123;&quot;id&quot;:3,&quot;name&quot;:&quot;1ç­&quot;,&quot;gradeId&quot;:2&#125;,&#123;&quot;id&quot;:4,&quot;name&quot;:&quot;2ç­&quot;,&quot;gradeId&quot;:2&#125;],&quot;student&quot;:[&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;å°A&quot;,&quot;classId&quot;:1&#125;,&#123;&quot;id&quot;:2,&quot;name&quot;:&quot;å°B&quot;,&quot;classId&quot;:1&#125;,&#123;&quot;id&quot;:3,&quot;name&quot;:&quot;å°C&quot;,&quot;classId&quot;:2&#125;,&#123;&quot;id&quot;:4,&quot;name&quot;:&quot;å°D&quot;,&quot;classId&quot;:2&#125;,&#123;&quot;id&quot;:5,&quot;name&quot;:&quot;å°E&quot;,&quot;classId&quot;:3&#125;,&#123;&quot;id&quot;:6,&quot;name&quot;:&quot;å°F&quot;,&quot;classId&quot;:3&#125;]&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å»ºä¸€ä¸ª database çš„æ–‡ä»¶å¤¹ï¼Œåœ¨æ–‡ä»¶å¤¹ä¸­å»ºä¸€ä¸ª index.jsonï¼ŒæŠŠä¸Šé¢çš„ json æ‹·è´åˆ°æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªç®€é™‹çš„æ•°æ®åº“ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åº“ä¸­æœ‰ä¸‰å¼ è¡¨ï¼Œå¹´çº§ã€ç­çº§å’Œå­¦ç”Ÿï¼Œæ¯å¼ è¡¨éƒ½å¯¹åº”å‡ æ¡æ•°æ®ã€‚<br>æ¥ä¸‹æ¥å‘¢æˆ‘ä»¬å°±è¦å¼€å§‹é’ˆå¯¹ä¸šåŠ¡æ¥å¼€å‘æ¥å£äº†ã€‚æˆ‘ä»¬é¦–å…ˆçœ‹<a href="https://graphql.cn/learn/" target="_blank" rel="noopener">graphql çš„å®˜æ–¹æ–‡æ¡£</a>ï¼Œå‘ç°å†…å®¹å’Œç»†èŠ‚éƒ½å¾ˆå¤šï¼Œé‚£æ¥ä¸‹æ¥ä½ å¯ä»¥è·Ÿç€æˆ‘åšï¼Œåšå®Œä¹‹åå‘¢ï¼Œä½ å°±çŸ¥é“æ–‡æ¡£ä¸­çš„å†…å®¹ä½ åº”è¯¥æ€ä¹ˆè¿ç”¨äº†ã€‚<br>é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“<code>query</code>å’Œ<code>mutation</code>ï¼Œæ–‡æ¡£ä¸Šå«ä»–ä»¬ä¸¤ä¸ºâ€œæŸ¥è¯¢â€å’Œâ€œå˜æ›´â€ï¼Œæ„æ€å°±æ˜¯è¯´ä¸€ä¸ªç®¡è¯»ï¼Œä¸€ä¸ªç®¡å†™ï¼Œä½ æ‰€æœ‰çš„ api éƒ½åº”è¯¥åœ¨è¿™é‡Œç™»è®°ä¸€ä¸‹ï¼Œè¿™æ · graphql æ‰çŸ¥é“ä½ è¦å¹²å•¥ã€‚<code>query</code>å’Œ<code>mutation</code> ä½ å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸¤é¢—æ ‘çš„ä¸»å¹²ï¼Œä½ å¯ä»¥ç»™ä»–æ·»ä¸€äº›æå¹²ã€‚é‚£ä¸€ä¸ªæ¥å£æ˜¯åº”è¯¥æ”¾åœ¨<code>query</code>è¿˜æ˜¯æ”¾åœ¨<code>mutation</code>,æ˜¯æ€ä¹ˆåŒºåˆ†çš„å‘¢ï¼Ÿå…¶å®æ˜¯é äººä¸ºåŒºåˆ†çš„ï¼Œä»–æ²¡æœ‰ä¸€ä¸ªè§„å®šæ¥ä¿è¯ä½ æ”¾çš„ä½ç½®æ˜¯æ­£ç¡®çš„ï¼Œæ¯”å¦‚ï¼Œåˆšåˆšçš„ hello æ¥å£ï¼Œæˆ‘ä»¬æŠŠå®ƒæ”¾åœ¨ mutation ä¸­ï¼Œä»–ä»ç„¶å¯ä»¥è¿”å›ã€‚</p>
<p>æˆ‘ä»¬æŠŠ main.js æ”¹æˆè¿™æ ·å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">const Koa = require(&apos;koa&apos;);</span><br><span class="line">const &#123; ApolloServer, gql &#125; = require(&apos;apollo-server-koa&apos;);</span><br><span class="line"></span><br><span class="line">// Construct a schema, using GraphQL schema language</span><br><span class="line">const typeDefs = gql`</span><br><span class="line">  type Query &#123;</span><br><span class="line">    hello: String</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  type Mutation &#123;</span><br><span class="line">    hello1: String</span><br><span class="line">  &#125;</span><br><span class="line">`;</span><br><span class="line"></span><br><span class="line">// Provide resolver functions for your schema fields</span><br><span class="line">const resolvers = &#123;</span><br><span class="line">  Query: &#123;</span><br><span class="line">    hello: () =&gt; &apos;Hello world!&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  Mutation: &#123;</span><br><span class="line">    hello1: () =&gt; &apos;Hello world!&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const server = new ApolloServer(&#123; typeDefs, resolvers &#125;);</span><br><span class="line"></span><br><span class="line">const app = new Koa();</span><br><span class="line">server.applyMiddleware(&#123; app &#125;);</span><br><span class="line"></span><br><span class="line">app.listen(&#123; port: 4000 &#125;, () =&gt;</span><br><span class="line">  console.log(`ğŸš€ Server ready at http://localhost:4000$&#123;server.graphqlPath&#125;`)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬è¯·æ±‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mutation &#123;</span><br><span class="line">  hello1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¾ç„¶å¯ä»¥è¿”å›ç»“æœï¼Œè¿™ä¸ªçº¦å®šå…¶å®ç±»ä¼¼ GET è¯·æ±‚å’Œ POST è¯·æ±‚çš„çº¦å®šï¼Œé å¤§å®¶è‡ªè§‰éµå®ˆã€‚<br>æ¥ä¸‹æ¥å°±æ˜¯æ”¹é€ é¡¹ç›®äº†ï¼Œé¦–å…ˆæˆ‘ä»¬åº”è¯¥å°†<code>typeDefs</code>å’Œ<code>resolvers</code>åˆ†ç¦»å¼€æ¥ï¼Œä¸ç„¶é¡¹ç›®åæœŸéš¾ä»¥ç»´æŠ¤ï¼Œé‚£æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ª schema æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸­å»ºä¸€ä¸ª typeDefs.js æ–‡ä»¶å’Œ resolvers.js æ–‡ä»¶ï¼Œ<br>å°† typeDefs å’Œ resolvers åˆ†åˆ«å†™åˆ°å„è‡ªæ–‡ä»¶ä¸­ï¼Œå†™å®Œååº”è¯¥æ˜¯è¿™æ ·</p>
<ul>
<li><p>main.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const Koa = require(&apos;koa&apos;);</span><br><span class="line">const &#123; ApolloServer, gql &#125; = require(&apos;apollo-server-koa&apos;);</span><br><span class="line"></span><br><span class="line">// Construct a schema, using GraphQL schema language</span><br><span class="line">const &#123; typeDefs &#125; = require(&apos;./schema/typeDefs&apos;);</span><br><span class="line"></span><br><span class="line">// Provide resolver functions for your schema fields</span><br><span class="line">const &#123; resolvers &#125; = require(&apos;./schema/resolvers&apos;);</span><br><span class="line"></span><br><span class="line">const server = new ApolloServer(&#123; typeDefs, resolvers &#125;);</span><br><span class="line"></span><br><span class="line">const app = new Koa();</span><br><span class="line">server.applyMiddleware(&#123; app &#125;);</span><br><span class="line"></span><br><span class="line">app.listen(&#123; port: 4000 &#125;, () =&gt;</span><br><span class="line">  console.log(`ğŸš€ Server ready at http://localhost:4000$&#123;server.graphqlPath&#125;`)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>typeDefs.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const &#123; gql &#125; = require(&apos;apollo-server-koa&apos;);</span><br><span class="line"></span><br><span class="line">module.exports.typeDefs = gql`</span><br><span class="line">  type Query &#123;</span><br><span class="line">    hello: String</span><br><span class="line">  &#125;</span><br><span class="line">`;</span><br></pre></td></tr></table></figure>
</li>
<li><p>resolvers.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">module.exports.resolvers = &#123;</span><br><span class="line">  Query: &#123;</span><br><span class="line">    hello: () =&gt; &apos;Hello world!&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>æ”¹é€ å®Œåè¯•è¯•è¿˜èƒ½ä¸èƒ½è·‘èµ·æ¥ï¼Œè·‘èµ·æ¥ä¹‹åæˆ‘ä»¬å°±å¼€å§‹å®ç°æˆ‘ä»¬çš„ä¸šåŠ¡ã€‚<br>é¦–å…ˆæˆ‘ä»¬å…ˆçœ‹æŸ¥è¯¢ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæŸ¥å¹´çº§çš„æ¥å£ï¼Œä¸€ä¸ªæŸ¥è¯¢ç­çº§çš„æ¥å£å’Œä¸€ä¸ªæŸ¥è¯¢å­¦ç”Ÿçš„æ¥å£ï¼Œå†™å®Œæ˜¯è¿™ä¸ªæ ·å­ï¼Œå…ˆè·Ÿç€æˆ‘å†™ï¼Œç„¶åæˆ‘ä¸€ä¸€è§£é‡Šéƒ½æ˜¯ä»€ä¹ˆæ„æ€</p>
</li>
<li><p>typeDefs.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">const &#123; gql &#125; = require(&apos;apollo-server-koa&apos;);</span><br><span class="line"></span><br><span class="line">module.exports.typeDefs = gql`</span><br><span class="line">  type Query &#123;</span><br><span class="line">    grade(gradeId: Int!): Grade</span><br><span class="line">    class(classId: Int!): Class</span><br><span class="line">    student(studentId: Int!): Student</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  type Grade &#123;</span><br><span class="line">    id: Int</span><br><span class="line">    name: String</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  type Class &#123;</span><br><span class="line">    id: Int</span><br><span class="line">    name: String</span><br><span class="line">    gradeId: Int</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  type Student &#123;</span><br><span class="line">    id: Int</span><br><span class="line">    name: String</span><br><span class="line">    classId: Int</span><br><span class="line">  &#125;</span><br><span class="line">`;</span><br></pre></td></tr></table></figure>
</li>
<li><p>resolvers.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">const database = require(&apos;../database&apos;);</span><br><span class="line"></span><br><span class="line">module.exports.resolvers = &#123;</span><br><span class="line">  Query: &#123;</span><br><span class="line">    grade: (root, &#123; gradeId &#125;) =&gt; &#123;</span><br><span class="line">      const grades = database.grade;</span><br><span class="line">      for (const grade of grades) &#123;</span><br><span class="line">        if (grade.id === gradeId) &#123;</span><br><span class="line">          return grade;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    class: (root, &#123; classId &#125;) =&gt; &#123;</span><br><span class="line">      const classes = database.class;</span><br><span class="line">      for (const classItem of classes) &#123;</span><br><span class="line">        if (classItem.id === classId) &#123;</span><br><span class="line">          return classItem;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    student: (root, &#123; studentId &#125;) =&gt; &#123;</span><br><span class="line">      const students = database.student;</span><br><span class="line">      for (const student of students) &#123;</span><br><span class="line">        if (student.id === studentId) &#123;</span><br><span class="line">          return student;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹åˆšåˆšå†™çš„æ˜¯å•¥ï¼Œé¦–å…ˆæˆ‘ä»¬åœ¨ Query çš„ç±»å‹ä¸­æ·»åŠ äº†ä¸‰ä¸ªä¸œè¥¿â€œgradeâ€ï¼Œ â€œclassâ€ï¼Œ â€œstudentâ€ï¼Œæˆ‘ä»¬åˆšåˆšè¯´äº† Query å¯ä»¥ç†è§£ä¸ºä¸€æ£µæ ‘çš„ä¸»å¹²ï¼Œé‚£æ·»åŠ çš„ç€ä¸‰ä¸ªä¸œè¥¿å°±æ˜¯åœ¨ä¸»å¹²ä¸Šæ·»åŠ äº†ä¸‰ä¸ªæå¹²ï¼Œæˆ–è€…å¯ä»¥ç†è§£ Query ä¸ºä¸€ä¸ªå¤§çš„ JSONï¼Œç»™å®ƒæ·»åŠ äº†ä¸‰ä¸ª keyï¼Œä½†æ˜¯æˆ‘ä»¬çœ‹å’Œ JSON æœ‰å•¥ä¸ä¸€æ ·ï¼Œå®ƒå¯ä»¥ä¼ å‚æ•°ï¼Œgrade ä¸­æˆ‘ä»¬æŠŠ gradeId ä¼ äº†è¿‡å»ï¼Œå¹¶ä¸”è§„å®šå¿…é¡»æ˜¯ Int ç±»å‹ï¼Œåé¢çš„é‚£ä¸ªâ€œ!â€ä»£è¡¨å¿…é¡»ä¼ è¿™ä¸ª gradeIdï¼Œâ€œ:â€åé¢çš„â€œGradeâ€æ„æ€å°±æ˜¯ï¼Œè°ƒè¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯è¿™ä¸ªç±»å‹çš„æ•°æ®ï¼Œä½†æ˜¯è¿™ä¸ªç±»å‹æ˜¯ä¸çŸ¥é“çš„å•Šï¼Œæ‰€ä»¥åœ¨ä¸‹é¢å®šä¹‰äº†è¿™ä¸ªç±»å‹é•¿å•¥æ ·å­ã€‚ä¹Ÿå°±æ˜¯ type Gradeã€‚æˆ‘è¿™é‡Œä¸¾ä¾‹çš„åªæ˜¯ä¸€ä¸¤ä¸ªç®€å•çš„ç±»å‹ï¼Œå…·ä½“å…¶ä»–çš„ç±»å‹å¯ä»¥æŸ¥è¯¢<a href="https://graphql.cn/learn/" target="_blank" rel="noopener">graphql çš„å®˜æ–¹æ–‡æ¡£</a>ã€‚è¿™æ ·å‘¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œç®€å•çš„å•è¡¨æŸ¥è¯¢äº†ã€‚</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  grade(gradeId: 1) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">  class(classId: 1) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">  student(studentId: 1) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å‘¢å¦‚æœæˆ‘è¦æŸ¥è¯¢ä¸€ä¸ªå¹´çº§ä¸‹æœ‰å‡ ä¸ªç­çº§ï¼Œè¿™ä¸ªå°±æŸ¥ä¸åˆ°äº†ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆåšå‘¢ï¼Ÿæˆ‘ä»¬æœŸæœ›çš„æ˜¯åœ¨å¹´çº§çš„ç±»å‹ä¸­å¢åŠ ä¸€ä¸ªæ•°ç»„æ¥è¡¨ç¤ºæ”¹å¹´çº§ä¸‹çš„ç­çº§ï¼Œå°±åƒæ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Grade &#123;</span><br><span class="line">  id: Int</span><br><span class="line">  name: String</span><br><span class="line">  classes: [Class]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£æˆ‘ä»¬å°±æŠŠ Grade çš„ç±»å‹å…ˆæ”¹æˆè¿™æ ·ï¼Œæˆ‘ä»¬æ‰§è¡ŒæŸ¥è¯¢</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  grade(gradeId: 1) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    classes &#123;</span><br><span class="line">      id</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çœ‹æŸ¥è¯¢çš„ç»“æœ classes æ˜¯ nullï¼Œåˆ°è¿™é‡ŒåŒå­¦ä»¬åº”è¯¥æƒ³åˆ°äº†æˆ‘ä»¬åº”è¯¥ä¿®æ”¹ resolvers.jsã€‚æ˜¯çš„ï¼Œæ²¡é”™ï¼Œresolvers.js å°±æ˜¯å¯¹ typeDefs çš„å®ç°ã€‚é‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆä¿®æ”¹å‘¢ï¼Ÿå¯èƒ½æœ‰çš„åŒå­¦ä¼šè¯´ï¼Œç›´æ¥ä¿®æ”¹ resolvers ä¸­çš„ grade çš„å®ç°ï¼Œè®©ä»–æŠŠ class æŸ¥å‡ºæ¥ä¸€èµ·è¿”å›ã€‚è¿™æ ·ç¡®å®ä¹Ÿèƒ½è¾¾åˆ°ç›®çš„ï¼Œä½†æ˜¯å´ä¸æ˜¯ graphql æƒ³è¦çš„æ•ˆæœã€‚è®©æˆ‘ä»¬ä»”ç»†è§‚å¯Ÿä¸€ä¸‹ typeDefsï¼Œçœ‹åˆ°å®ƒé‡Œé¢æ‰€æœ‰çš„å®šä¹‰éƒ½æ˜¯ç±»å‹å®šä¹‰ï¼Œæˆ‘ä»¬åœ¨å›æƒ³ Query æ˜¯æ ‘å¹²ï¼Œå…¶ä»–ç±»å‹æ˜¯æå¹²çš„ä¼ç¬”ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥å‘ç°å…¶å® â€œtype Gradeâ€ å’Œ â€œtype Queryâ€ é•¿å¾—å¾ˆåƒï¼Ÿ<br>å¦‚æœæ˜¯ä¸‹é¢è¿™æ ·å­é‚£æ˜¯ä¸æ˜¯å°±çœ‹èµ·æ¥ä¸€æ‘¸ä¸€æ ·äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type Query &#123;</span><br><span class="line">  grade(gradeId: Int!): Grade</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Grade &#123;</span><br><span class="line">  classes(gradeId: Int!): [Class]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£æˆ‘ä»¬åº”è¯¥å°±çŸ¥é“ resolvers é‡Œé¢è¯¥æ€æ ·å†™äº†ï¼šç»™ resolvers å¢åŠ ä¸€ä¸ªç±»å‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">const database = require(&apos;../database&apos;);</span><br><span class="line"></span><br><span class="line">module.exports.resolvers = &#123;</span><br><span class="line">  Query: &#123;</span><br><span class="line">    grade: (root, &#123; gradeId &#125;) =&gt; &#123;</span><br><span class="line">      const grades = database.grade;</span><br><span class="line">      for (const grade of grades) &#123;</span><br><span class="line">        if (grade.id === gradeId) &#123;</span><br><span class="line">          return grade;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    class: (root, &#123; classId &#125;) =&gt; &#123;</span><br><span class="line">      const classes = database.class;</span><br><span class="line">      for (const classItem of classes) &#123;</span><br><span class="line">        if (classItem.id === classId) &#123;</span><br><span class="line">          return classItem;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    student: (root, &#123; studentId &#125;) =&gt; &#123;</span><br><span class="line">      const students = database.student;</span><br><span class="line">      for (const student of students) &#123;</span><br><span class="line">        if (student.id === studentId) &#123;</span><br><span class="line">          return student;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  Grade: &#123;</span><br><span class="line">    classes: (root, &#123; gradeId &#125;) =&gt; &#123;</span><br><span class="line">      const classes = database.class.filter(</span><br><span class="line">        classItem =&gt; classItem.gradeId === gradeId</span><br><span class="line">      );</span><br><span class="line">      return classes;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>é‚£æˆ‘ä»¬è°ƒç”¨çš„æ—¶å€™åº”è¯¥è¿™ä¹ˆè°ƒç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  grade(gradeId: 1) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    classes(gradeId: 1) &#123;</span><br><span class="line">      id</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› ä¸º classes éœ€è¦ä¼ å‚æ•°ï¼Œé‚£æˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨è¯·æ±‚çš„æ—¶å€™å¸¦ä¸Šå‚æ•°ï¼Œå¯æ˜¯æˆ‘ä»¬èƒ½ä¸èƒ½ä¸ä¼ å‚æ•°å‘¢ï¼Ÿå› ä¸ºå¦‚æœæŠŠæ•°æ®æ•´ä½“çœ‹ä½œä¸€ä¸ª JSON çš„è¯æˆ‘ä»¬åªè¦æ‹¿åˆ° grade å°±åº”è¯¥èƒ½æ‹¿åˆ°ä»–çš„å¹´çº§ï¼Œè€Œä¸æ˜¯åœ¨ä¼ ä¸€æ¬¡å‚æ•°ï¼Œè€Œä¸”å¦‚æœå‚æ•°ä¸ä¸€è‡´é‚£å°±ä¼šå‡ºç°æŸ¥é”™çš„é—®é¢˜ã€‚ä¸è¦æ€¥ï¼Œå½“ç„¶æ˜¯å¯ä»¥çš„ã€‚æˆ‘ä»¬çœ‹åˆ° resolvers é‡Œé¢ç±»å‹çš„å®ç°ä¸­ç¬¬ä¸€ä¸ªå‚æ•° root ä¸€ç›´æ²¡ç”¨åˆ°ï¼Œä»–çš„ä½œç”¨å°±æ˜¯ä¸ºäº†è¿™ç§çº§è”æŸ¥è¯¢ã€‚æˆ‘ä»¬å…ˆæ‰“å°ä¸€ä¸‹å®ƒï¼Œçœ‹ä»–æ˜¯å•¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Grade: &#123;</span><br><span class="line">  classes: (root, &#123; gradeId &#125;) =&gt; &#123;</span><br><span class="line">    console.log(root);</span><br><span class="line">    const classes = database.class.filter(</span><br><span class="line">      classItem =&gt; classItem.gradeId === gradeId</span><br><span class="line">    );</span><br><span class="line">    return classes;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰“å°å‡ºæ¥åæ˜¯ä¸æ˜¯å‘ç°å•¥äº†ï¼Œå®ƒå°±æ˜¯å®ƒçˆ¶çº§çš„æ•°æ®ï¼Œé‚£æ˜¯ä¸æ˜¯å¯ä»¥ä»çˆ¶çº§æ•°æ®ä¸­æ‹¿åˆ° gradeIdï¼Œæ¥æˆ‘ä»¬æ”¹é€ ä¸€ä¸‹ï¼Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Grade &#123;</span><br><span class="line">  id: Int</span><br><span class="line">  name: String</span><br><span class="line">  classes: [Class]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŠŠ classes çš„å‚æ•°å»æ‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Grade: &#123;</span><br><span class="line">  classes: root =&gt; &#123;</span><br><span class="line">    const gradeId = root.id;</span><br><span class="line">    const classes = database.class.filter(</span><br><span class="line">      classItem =&gt; classItem.gradeId === gradeId</span><br><span class="line">    );</span><br><span class="line">    return classes;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŠŠ resolvers çš„ç±»å‹å®ç°æ”¹æ”¹ï¼Œä» root ä¸­è·å– gradeId<br>æˆ‘ä»¬åœ¨è°ƒç”¨ä¸€æ¬¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  grade(gradeId: 1) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    classes &#123;</span><br><span class="line">      id</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ˜¯ä¸æ˜¯ä¾ç„¶å¯ä»¥ï¼Œæˆ‘ä»¬ç°åœ¨æŠŠå…¶ä»–ç±»å‹çš„å…³è”æŸ¥è¯¢ä¹ŸåŠ ä¸Šã€‚æˆ‘ä»¬å¯ä»¥è¿›è¡Œå¤šçº§çš„æŸ¥è¯¢</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  grade(gradeId: 1) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    classes &#123;</span><br><span class="line">      id</span><br><span class="line">      name</span><br><span class="line">      students &#123;</span><br><span class="line">        id</span><br><span class="line">        name</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å›è¿‡å¤´æ¥å¯¹æ¯”ç€çœ‹çœ‹æˆ‘ä»¬å†™çš„ typeDefs å’Œ resolvers</p>
<html>
  <table style="margin-left: auto; margin-right: auto;">
    <tr>
      <td style="vertical-align: top;">

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">module.exports.typeDefs = gql`</span><br><span class="line">  type Query &#123;</span><br><span class="line">    grade(gradeId: Int!): Grade</span><br><span class="line">    class(classId: Int!): Class</span><br><span class="line">    student(studentId: Int!): Student</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  type Grade &#123;</span><br><span class="line">    id: Int</span><br><span class="line">    name: String</span><br><span class="line">    classes: [Class]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  type Class &#123;</span><br><span class="line">    id: Int</span><br><span class="line">    name: String</span><br><span class="line">    gradeId: Int</span><br><span class="line">    students: [Student]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  type Student &#123;</span><br><span class="line">    id: Int</span><br><span class="line">    name: String</span><br><span class="line">    classId: Int</span><br><span class="line">  &#125;</span><br><span class="line">`;</span><br></pre></td></tr></table></figure>

  </td>
  <td style="vertical-align: top;">

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">module.exports.resolvers = &#123;</span><br><span class="line">  Query: &#123;</span><br><span class="line">    grade: (root, &#123; gradeId &#125;) =&gt; &#123; ... &#125;,</span><br><span class="line">    class: (root, &#123; classId &#125;) =&gt; &#123; ... &#125;,</span><br><span class="line">    student: (root, &#123; studentId &#125;) =&gt; &#123; ... &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  Grade: &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    classes: root =&gt; &#123; ... &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  Class: &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    students: root =&gt; &#123; ... &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

  </td>
    </tr>
  </table>
</html>
è¿™æ ·ä¸¤è¾¹ä¸€å¯¹æ¯”æ˜¯ä¸æ˜¯å¾ˆå¤šæ¸…æ¥šäº†ï¼Œresolversæ˜¯å¯¹typeDefsé‡Œé¢å„ä¸ªç±»å‹çš„å­—æ®µçš„å®ç°ï¼Œä¸ä»…ä»…æ˜¯è‡ªå®šä¹‰ç±»å‹çš„å­—æ®µå¯ä»¥ç”¨resolverså®ç°ï¼ŒIntç­‰åŸºç¡€ç±»å‹çš„ä¹Ÿå¯ä»¥é‡æ–°å®ç°ä¸€éï¼Œ
æ¯”å¦‚ï¼š

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Grade: &#123;</span><br><span class="line">  name: root =&gt; root.name + &quot;ï¼ˆåŒ—äº¬æ ¡åŒºï¼‰&quot;,</span><br><span class="line">  classes: root =&gt; &#123; ... &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨æ˜¯ä¸æ˜¯æ„Ÿè§‰åˆ° graphql çš„é­…åŠ›äº†ï¼Ÿæ¥ä¸‹æ¥çš„ä¸œè¥¿æ‰æ˜¯å®ƒçœŸæ­£é­…åŠ›æ‰€åœ¨<br>æˆ‘ä»¬ä¸º grade ç±»å‹çš„ classes å­—æ®µçš„ resolver åŠ ä¸€ä¸ªæ—¥å¿—</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Grade: &#123;</span><br><span class="line">  name: root =&gt; root.name + &apos;ï¼ˆåŒ—äº¬æ ¡åŒºï¼‰&apos;,</span><br><span class="line">  classes: root =&gt; &#123;</span><br><span class="line">    console.log(&apos;æŸ¥è¯¢äº†ç­çº§æ•°æ®è¡¨ï¼&apos;);</span><br><span class="line">    const gradeId = root.id;</span><br><span class="line">    const classes = database.class.filter(</span><br><span class="line">      classItem =&gt; classItem.gradeId === gradeId</span><br><span class="line">    );</span><br><span class="line">    return classes;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ¥ç€è¯·æ±‚æ•°æ®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  grade(gradeId: 1) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    classes &#123;</span><br><span class="line">      id</span><br><span class="line">      name</span><br><span class="line">      students &#123;</span><br><span class="line">        id</span><br><span class="line">        name</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çœ‹åˆ°æ—¥å¿—æ‰“å°å‡ºæ¥äº†ï¼Œé‚£æˆ‘ä»¬å¦‚æœä¸æŸ¥è¯¢ classes è¯•è¯•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  grade(gradeId: 1) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ˜¯ä¸æ˜¯æ²¡æœ‰æ‰“æ—¥å¿—ï¼Œè¿™å°±æ˜¯ graphqlï¼Œä½ è¦å•¥æˆ‘ç»™å•¥ï¼Œä½ ä¸è¦æˆ‘å°±ä¸å»æŸ¥</p>
<p>å¦‚æœç†è§£äº†ä¸Šé¢è¿™äº›ï¼Œé‚£ mutation å°±å¾ˆç®€å•äº†ï¼Œå®ƒå’Œ query åŸºæœ¬ä¸€æ ·ï¼Œåªä¸è¿‡å®ƒå¯èƒ½ä¼šæ”¹åŠ¨æ•°æ®åº“ï¼Œå¹¶ä¸”ä½ å…³æ³¨çš„å¯èƒ½æ˜¯ç»“æœï¼Œä½†æ˜¯ä½ æŠŠç»“æœçœ‹æˆæ˜¯æŸ¥è¯¢çš„å­—æ®µæ‹¿å®ƒæ˜¯ä¸æ˜¯å°±å¾ˆå®¹æ˜“å°±ç†è§£äº†</p>
<p>å¥½äº†ï¼Œä»Šå¤©å°±åˆ°è¿™ï¼Œæ”¹å¤©æˆ‘ä»¬æ¥ç€è®²å‰ç«¯å¦‚ä½•è¿ç”¨ï¼Œå…¶å®çŒœä¸€çŒœçš„è¯å®ƒå°±ä¸€ä¸ªè¯·æ±‚åœ°å€ï¼Œè€Œä¸”ä»–çš„ GET è¯·æ±‚è¢«å¯è§†åŒ–ç•Œé¢å ç”¨ï¼Œé‚£ä»–åº”è¯¥æ˜¯æ‰€æœ‰æ¥å£ç”¨åŒä¸€ä¸ª POST è¯·æ±‚ï¼Œé‚£ä¹ˆæ€ä¹ˆåŒºåˆ†å„ä¸ªè¯·æ±‚å‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ä¸€å¥è¯ï¼šgraphql æ˜¯ä¸€å¥—æ ‡å‡†ã€‚æƒ³åˆ°äº†å—ï¼Ÿ</p>
<h4 id="è¯¾ä»¶åœ°å€"><a href="#è¯¾ä»¶åœ°å€" class="headerlink" title="è¯¾ä»¶åœ°å€"></a>è¯¾ä»¶åœ°å€</h4><p><a href="https://github.com/yangjiagongzi/graphql-study" target="_blank" rel="noopener">https://github.com/yangjiagongzi/graphql-study</a></p>
<h4 id="ä¸‹ä¸€èŠ‚ï¼šgraphql-å‰ç«¯é¡µé¢çš„åº”ç”¨"><a href="#ä¸‹ä¸€èŠ‚ï¼šgraphql-å‰ç«¯é¡µé¢çš„åº”ç”¨" class="headerlink" title="ä¸‹ä¸€èŠ‚ï¼šgraphql å‰ç«¯é¡µé¢çš„åº”ç”¨"></a>ä¸‹ä¸€èŠ‚ï¼š<a href="https://yangjiagongzi.github.io/2019/08/06/graphql%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/">graphql å‰ç«¯é¡µé¢çš„åº”ç”¨</a></h4>
    </div>

    

    
        <div class="post-tags">
            <i class="fa fa-tags" aria-hidden="true"></i>
            <a href="/tags/graphql/">#graphql</a>
        </div>
    

</div>
    </section>
  </div>
</div>

    </div>

    <!-- Footer -->
    <div class="push"></div>

<footer class="footer-content">
  <div class="container">
    <div class="footer-copyright">æ„¿ä½ ä¸€ç”ŸåŠªåŠ›ï¼Œä¸€ç”Ÿè¢«çˆ±ï¼Œæƒ³è¦çš„éƒ½æ‹¥æœ‰ï¼Œå¾—ä¸åˆ°çš„éƒ½é‡Šæ€€ã€‚</div>
  </div>
</footer>


    <!-- After footer scripts -->
    <script src="/js/jquery.js"></script> <script src="/js/tweenmax.js"></script> <script src="/js/main.js"></script>
<script src="/js/logo.js"></script>

  </body>
</html>
